{"version":3,"sources":["api/requests.ts","pages/Homepage.tsx","store/counterSlice.ts","store/selectors.ts","pages/PostCreator.tsx","components/Post/Post.tsx","components/Comments/Comments.tsx","pages/Posts.tsx","App.tsx","store/store.ts","index.tsx"],"names":["BASE_URL","GetFromServer","specify","a","fetch","result","json","PutOnServer","specifyType","specifyData","method","headers","body","JSON","stringify","DeleteFromServer","id","UpdateOnServer","obj","title","HomePage","counterSlice","createSlice","name","initialState","posts","selectedPostId","reducers","showPosts","state","action","payload","selectPost","actions","postSelector","counter","loadPosts","createSelector","loadSinglePost","find","el","PostCreator","useState","setTitle","setBody","dispatch","useDispatch","useSelector","onSubmit","event","preventDefault","newPost","length","type","placeholder","value","onChange","target","Post","redactingPost","setRedactingPost","redactedTitle","setRedactedTitle","redactedBody","setRedactedBody","selectedPost","className","onClick","rows","postToUpdate","Comments","commentsArray","setCommentArray","commentBody","setCommentBody","useEffect","comments","fetcher","map","singleComment","newComment","postId","Posts","isPostsShown","setPostsShown","App","to","path","element","configureStore","reducer","counterReducer","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.a0fb7809.chunk.js","sourcesContent":["import { PostDataType, Comment } from '../react-app-env';\n\nconst BASE_URL = 'https://bloggy-api.herokuapp.com/';\n\nexport const GetFromServer = async (specify:string) => {\n  const result = await fetch(`${BASE_URL}${specify}`);\n\n  return result.json();\n};\n\nexport const PutOnServer = async (specifyType: string, specifyData: PostDataType | Comment) => {\n  const result = await fetch(`${BASE_URL}${specifyType}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(specifyData),\n  });\n\n  return result.json();\n};\n\nexport const DeleteFromServer = async (id:number) => {\n  const result = await fetch(`${BASE_URL}posts/${id}`, {\n    method: 'DELETE',\n  });\n\n  return result.json();\n};\n\nexport const UpdateOnServer = async (specifyData: PostDataType) => {\n  const obj = { title: specifyData.title, body: specifyData.body };\n\n  const result = fetch(`${BASE_URL}posts/${specifyData.id}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(obj),\n  });\n\n  return result;\n};\n","import React from 'react';\n\nexport const HomePage : React.FC = () => {\n  return (\n    <h1>Welcome</h1>\n  );\n};\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { PostDataType } from '../react-app-env';\n\nexport interface InitialState {\n  posts: PostDataType[],\n  selectedPostId: null | number,\n}\n\nconst initialState : InitialState = {\n  posts: [],\n  selectedPostId: null,\n};\n\nexport const counterSlice = createSlice({\n  name: 'counter',\n  initialState,\n  reducers: {\n    showPosts: (state, action: PayloadAction<PostDataType[]>) => {\n      state.posts = action.payload;\n    },\n    selectPost: (state, action: PayloadAction<number | null>) => {\n      state.selectedPostId = action.payload;\n    },\n  },\n});\n\nexport const { showPosts } = counterSlice.actions;\n\nexport default counterSlice.reducer;\n","import { createSelector } from '@reduxjs/toolkit';\nimport { PostDataType } from '../react-app-env';\n\nexport const postSelector = (state : any) => state.counter.posts;\nexport const postIdSelector = (state : any) => state.counter.selectedPostId;\n\nexport const loadPosts = createSelector(([postSelector]), (posts) => {\n  return posts;\n});\n\nexport const loadSinglePost = createSelector(([postIdSelector, postSelector]), (id, posts) => {\n  if (id === null) {\n    return null;\n  }\n\n  return (posts.find((el : PostDataType) => el.id === id));\n});\n","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { PutOnServer } from '../api/requests';\nimport { counterSlice } from '../store/counterSlice';\nimport { loadPosts } from '../store/selectors';\n\nexport const PostCreator : React.FC = () => {\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n\n  const dispatch = useDispatch();\n  const posts = useSelector(loadPosts);\n\n  return (\n    <div>\n      <form\n        onSubmit={(event) => {\n          event.preventDefault();\n\n          const newPost = {\n            id: posts[posts.length - 1].id + 1,\n            title,\n            body,\n          };\n\n          dispatch(counterSlice.actions.showPosts([...posts, newPost]));\n          PutOnServer('posts', newPost);\n        }}\n      >\n        <input\n          type=\"text\"\n          placeholder=\"post title\"\n          value={title}\n          onChange={(event) => {\n            setTitle(event.target.value);\n          }}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"post body\"\n          value={body}\n          onChange={(event) => {\n            setBody(event.target.value);\n          }}\n        />\n        <button\n          type=\"submit\"\n        >\n          Submit\n        </button>\n      </form>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { DeleteFromServer, GetFromServer, UpdateOnServer } from '../../api/requests';\nimport { counterSlice } from '../../store/counterSlice';\nimport { loadSinglePost } from '../../store/selectors';\nimport './Post.scss';\n\ninterface Props {\n  body: string,\n  title: string,\n  id: number,\n}\n\nexport const Post : React.FC<Props> = ({ id, title = '', body = '' }) => {\n  const dispatch = useDispatch();\n\n  const [redactingPost, setRedactingPost] = useState(false);\n  const [redactedTitle, setRedactedTitle] = useState(title);\n  const [redactedBody, setRedactedBody] = useState(body);\n\n  const selectedPost = useSelector(loadSinglePost);\n\n  return (\n    <div className=\"post\">\n      {!redactingPost && (\n        <>\n          <h1>{title}</h1>\n          <p>{body}</p>\n          <button\n            type=\"button\"\n            onClick={() => {\n              setRedactingPost(true);\n            }}\n          >\n            redact post\n          </button>\n        </>\n      )}\n      {\n        redactingPost && (\n          <>\n            <input\n              type=\"text\"\n              value={redactedTitle}\n              onChange={(event) => setRedactedTitle(event.target.value)}\n            />\n            <textarea\n              value={redactedBody}\n              rows={15}\n              onChange={(event) => setRedactedBody(event.target.value)}\n            />\n            <button\n              type=\"button\"\n              onClick={async () => {\n                const postToUpdate = {\n                  id,\n                  title: redactedTitle,\n                  body: redactedBody,\n                };\n\n                await UpdateOnServer(postToUpdate);\n\n                const result = await GetFromServer('posts');\n\n                dispatch(counterSlice.actions.showPosts(result));\n\n                setRedactingPost(false);\n              }}\n            >\n              submit changes\n            </button>\n          </>\n        )\n      }\n      <button\n        type=\"button\"\n        onClick={() => {\n          if ((selectedPost === null) || (selectedPost.id !== id)) {\n            dispatch(counterSlice.actions.selectPost(id));\n          } else {\n            dispatch(counterSlice.actions.selectPost(null));\n          }\n        }}\n      >\n        { selectedPost\n          ? ('Close post')\n          : ('Show more')}\n      </button>\n      <button\n        type=\"button\"\n        onClick={async () => {\n          await DeleteFromServer(id);\n          dispatch(\n            counterSlice\n              .actions\n              .showPosts(await GetFromServer('posts')),\n          );\n        }}\n      >\n        Delete Post\n      </button>\n    </div>\n\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { GetFromServer, PutOnServer } from '../../api/requests';\nimport { Comment } from '../../react-app-env';\n\ninterface Props {\n  id: number,\n}\n\nexport const Comments : React.FC<Props> = ({ id }) => {\n  const [commentsArray, setCommentArray] = useState<Comment[]>([]);\n\n  const [commentBody, setCommentBody] = useState('');\n\n  useEffect(() => {\n    const fetcher = async () => {\n      const result = await GetFromServer(`posts/${id}?_embed=comments`);\n\n      setCommentArray(result.comments);\n    };\n\n    fetcher();\n  }, []);\n\n  return (\n    <div className=\"comments\">\n      {\n        commentsArray.map(singleComment => (\n          <p key={singleComment.id}>\n            {singleComment.body}\n          </p>\n        ))\n      }\n      <form\n        onSubmit={(event) => {\n          event.preventDefault();\n\n          const newComment = {\n            postId: id,\n            body: commentBody,\n          };\n\n          PutOnServer('comments', newComment);\n\n          setCommentArray([...commentsArray, newComment]);\n        }}\n      >\n        <input\n          type=\"text\"\n          value={commentBody}\n          onChange={(event) => {\n            setCommentBody(event.target.value);\n          }}\n        />\n        <button type=\"submit\">\n          send\n        </button>\n      </form>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { loadPosts, loadSinglePost } from '../store/selectors';\nimport { Post } from '../components/Post/Post';\nimport { PostDataType } from '../react-app-env';\nimport { Comments } from '../components/Comments/Comments';\n\nexport const Posts : React.FC = () => {\n  const posts = useSelector(loadPosts);\n  const selectedPost = useSelector(loadSinglePost);\n\n  const [isPostsShown, setPostsShown] = useState(false);\n\n  return (\n    <div className=\"posts__container\">\n      {\n        (isPostsShown)\n          ? (\n            (selectedPost === null)\n              ? (\n                posts.map((el : PostDataType) => (\n                  <Post key={el.id} id={el.id} title={el.title} body={el.body} />\n                ))\n              )\n              : (\n                <>\n                  <Post\n                    key={selectedPost.id}\n                    id={selectedPost.id}\n                    title={selectedPost.title}\n                    body={selectedPost.body}\n                  />\n                  <Comments id={selectedPost.id} />\n\n                </>\n              )\n          )\n          : (\n            <>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setPostsShown(true);\n                }}\n              >\n                show me posts\n              </button>\n              <p>\n                There is no posts right now :c\n              </p>\n            </>\n          )\n      }\n    </div>\n  );\n};\n","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Link, Route, Routes } from 'react-router-dom';\nimport { GetFromServer } from './api/requests';\nimport './App.scss';\nimport { HomePage } from './pages/Homepage';\nimport { PostCreator } from './pages/PostCreator';\nimport { Posts } from './pages/Posts';\nimport { counterSlice } from './store/counterSlice';\n\nexport const App: React.FC = () => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const fetcher = async () => {\n      const result = await GetFromServer('posts');\n\n      dispatch(counterSlice.actions.showPosts(result));\n    };\n\n    fetcher();\n  }, []);\n\n  return (\n    <>\n      <header>\n        <Link to=\"/\">Home</Link>\n        <Link to=\"/posts\">Posts</Link>\n        <Link to=\"/post_creator\">Create Post</Link>\n      </header>\n      <Routes>\n        <Route path=\"/\" element={<HomePage />} />\n        <Route path=\"/posts\" element={<Posts />} />\n        <Route path=\"/post_creator\" element={<PostCreator />} />\n      </Routes>\n    </>\n  );\n};\n","import { configureStore } from '@reduxjs/toolkit';\nimport counterReducer from './counterSlice';\n\nexport default configureStore({\n  reducer: {\n    counter: counterReducer,\n  },\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { App } from './App';\nimport store from './store/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}